    .section .data

# ------------------------------------------------------------
# Test memory contents
# ------------------------------------------------------------
test_data:
    .word 10        # offset 0
    .word 20        # offset 4
    .word 30        # offset 8
    .word 40        # offset 12

# ------------------------------------------------------------
# Program
# ------------------------------------------------------------
    .section .text
    .globl _start

_start:

    # Load base pointer (x2 → test_data)
    la   x2, test_data

# ------------------------------------------------------------
# Load-use hazard (must stall 1 cycle)
# ------------------------------------------------------------
    lw   x1, 0(x2)          # x1 = 10
    addi x3, x1, 1          # must stall → x3 = 11

    addi x4, x3, 1          # x4 = 12
    addi x5, x4, 2          # x5 = 14

# ------------------------------------------------------------
# Normal forwarding (no stall)
# ------------------------------------------------------------
    add  x6, x3, x4         # x6 = 11 + 12 = 23
    addi x7, x6, 1          # x7 = 24

# ------------------------------------------------------------
# Load MEM→EX forwarding (NO stall)
# ------------------------------------------------------------
    lw   x8, 4(x2)          # x8 = 20
    add  x9, x8, x7         # x9 = 20 + 24 = 44

# ------------------------------------------------------------
# More dependent ops
# ------------------------------------------------------------
    addi x10, x9, 3         # x10 = 47
    addi x11, x10, 1        # x11 = 48

# ------------------------------------------------------------
# End program
# ------------------------------------------------------------
done:
    ebreak
